# ğŸš€ Deployment Guide - Render.com

This guide walks you through deploying the Simon Game to Render.com using the Render MCP.

---

## ğŸ“‹ Prerequisites

- GitHub account with this repository
- Render.com account (free tier works!)
- Repository pushed to GitHub

---

## ğŸ¯ Deployment Steps

### Option 1: Using Render MCP (Recommended)

1. **Use the Render MCP tool to create services**
   ```
   Ask your AI assistant:
   "Deploy this project to Render using the render.yaml configuration"
   ```

### Option 2: Manual Deployment via Render Dashboard

1. **Go to Render Dashboard**
   - Visit: https://dashboard.render.com

2. **Connect GitHub Repository**
   - Click "New +" â†’ "Blueprint"
   - Connect your GitHub account
   - Select `simon-game-app` repository
   - Render will detect `render.yaml` automatically

3. **Configure Environment Variables**
   
   **Backend Service:**
   - `JWT_SECRET` - Auto-generated by Render âœ…
   - `FRONTEND_URL` - Will be: `https://simon-game-frontend.onrender.com`
   - `NODE_ENV` - Set to `production` âœ…
   
   **Frontend Service:**
   - `VITE_API_URL` - Will be: `https://simon-game-backend.onrender.com`
   - `VITE_SOCKET_URL` - Will be: `https://simon-game-backend.onrender.com`

4. **Deploy!**
   - Click "Apply"
   - Render will:
     - Build backend (install deps + compile TypeScript)
     - Build frontend (install deps + Vite build)
     - Start backend server
     - Serve frontend as static site
     - Assign URLs with SSL certificates

5. **Update Environment Variables**
   - After deployment, go to each service
   - Update the URLs with actual Render URLs
   - Services will auto-redeploy

---

## ğŸ”§ What Gets Deployed

### Backend Service
- **Type:** Web Service (Node.js)
- **Build:** `npm install && npm run build`
- **Start:** `npm start` (runs `node dist/backend/server.js`)
- **Health Check:** `/health`
- **Port:** 10000 (Render default)

### Frontend Service
- **Type:** Static Site
- **Build:** `cd frontend && npm install && npm run build`
- **Publish:** `frontend/dist`
- **SPA Routing:** All routes redirect to `index.html`

---

## ğŸ“Š Post-Deployment

### Verify Backend
```bash
curl https://your-backend.onrender.com/health
```

Should return:
```json
{
  "status": "ok",
  "timestamp": "2026-01-09T...",
  "environment": "production"
}
```

### Verify Frontend
Open: `https://your-frontend.onrender.com`

You should see the Entry Page with:
- Create Game button
- Join Game button

---

## ğŸ”„ Auto-Deploy

Once set up, Render will automatically deploy when you push to `main` branch:

```bash
git add .
git commit -m "feat: new feature"
git push origin main
```

Render will:
1. Detect the push
2. Rebuild both services
3. Deploy automatically
4. Show build logs in dashboard

---

## ğŸ› Troubleshooting

### Backend won't start
- Check `JWT_SECRET` is set
- Check `FRONTEND_URL` matches your frontend URL
- View logs in Render dashboard

### Frontend can't connect to backend
- Verify `VITE_API_URL` and `VITE_SOCKET_URL` are correct
- Check CORS is allowing frontend domain
- Ensure both services are running

### WebSocket connection fails
- Render supports WebSocket out of the box
- Make sure backend URL uses `https://` (not `http://`)
- Socket.io will auto-upgrade to WebSocket

---

## ğŸ’° Cost

**Free Tier Limits:**
- Backend: Spins down after 15 min of inactivity (cold start ~30s)
- Frontend: Always available (static site)
- 750 hours/month free

**To stay always-on:**
- Upgrade to paid tier ($7/month per service)

---

## ğŸ” Security Checklist

- âœ… JWT_SECRET is auto-generated (strong random)
- âœ… HTTPS enabled by default
- âœ… Environment variables encrypted
- âœ… CORS configured for specific origin
- âœ… HTTP-only cookies for sessions

---

## ğŸ“ˆ Monitoring

Render provides:
- Real-time logs
- CPU/Memory usage graphs
- Request metrics
- Uptime monitoring
- Email alerts

Access via: https://dashboard.render.com

---

## ğŸ® Your Deployed Game

After deployment:
- **Frontend:** `https://simon-game-frontend.onrender.com`
- **Backend API:** `https://simon-game-backend.onrender.com`
- **Health Check:** `https://simon-game-backend.onrender.com/health`

Share the frontend URL with friends to play!

---

## ğŸ“š Resources

- [Render Documentation](https://render.com/docs)
- [Node.js on Render](https://render.com/docs/deploy-node-express-app)
- [Static Sites on Render](https://render.com/docs/static-sites)
- [Environment Variables](https://render.com/docs/environment-variables)

---

**Ready to deploy? Let's go! ğŸš€**
